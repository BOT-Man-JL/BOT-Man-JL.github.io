<!DOCTYPE html>
<html>
<head>
    <script src="./javascripts/jquery-3.1.0.min.js"></script>
    <script src="./javascripts/qrcode.js"></script>
    <script src="./javascripts/qrcode_gen.js"></script>
    <meta name="viewport" content="width=device-width" />
    <title>QR Code Generator</title>
</head>
<body>
    <div style="text-align:center;">
        <h1>QR Code Generator</h1>
        <span>Type Number:</span>
        <select id="typeNumber"></select>
        <span>Error Correction:</span>
        <select id="errCorrect">
            <option value="L">L(7%)</option>
            <option value="M">M(15%)</option>
            <option value="Q">Q(25%)</option>
            <option value="H">H(30%)</option>
        </select>
        <p>
            <textarea id="qrcodeText" rows="6" placeholder="Scan to Visit my Site~ Happy Coding!"
                      style="width:80%; max-width:400px; font-size:large;"></textarea>
        </p>
        <div id="qrcodeCanvas"></div>
        <p>
            qrcode.js lib by <a href="https://github.com/kazuhikoarase/qrcode-generator">kazuhikoarase</a>
        </p>
    </div>

    <script>
        $(document).ready(function ()
        {
            function update()
            {
                var text = utf16to8($("#qrcodeText").val());
                //var text = $("#qrcodeText").val();
                text = text == "" ? "https://bot-man-jl.github.io" : text;

                var obj = qrcodeSVG({
                    text: text,
                    size: 360,
                    typeNumber: parseInt($("#typeNumber").val()),
                    correctLevel: QRErrorCorrectLevel[$("#errCorrect").val()]
                });

                $('#qrcodeCanvas').empty();
                $('#qrcodeCanvas').append(obj);
            };

            $("#qrcodeText").bind("input", function ()
            {
                update();
            });
            $("#typeNumber").change(function ()
            {
                update();
            });
            $("#errCorrect").change(function ()
            {
                update();
            });

            var typeNumber = $("#typeNumber");
            typeNumber.append(new Option("Auto", "-1"));
            for (var i = 1; i <= 40; i++)
            {
                typeNumber.append(new Option(i, i));
            }

            update();
        });
    </script>
</body>
</html>
